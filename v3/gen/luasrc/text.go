package luasrc

// 报错行号+3
const templateText = `-- Generated by github.com/davyxu/tabtoy
-- Version: {{.Version}}
local tab = { {{range $di, $tab := .Datas.AllTables}}
	{{$tab.HeaderType}} = { {{range $unusedrow,$row := $tab.DataRowIndex}}{{$headers := $.Types.AllFieldByName $tab.OriginalHeaderType}}
		{ {{range $col, $header := $headers}}{{$isEmpty := IsEmptyTabValue $ $tab $headers $row $col}}{{if not $isEmpty}}{{$header.FieldName}} = {{WrapTabValue $ $tab $headers $row $col}}, {{end}}{{end}}}, {{end}} 
	},{{end}}
}
{{range $ii, $idx := GetIndices $}}
-- {{$idx.Table.HeaderType}}
tab.{{$idx.Table.HeaderType}}By{{$idx.FieldInfo.FieldName}} = {}
for _, rec in pairs(tab.{{$idx.Table.HeaderType}}) do
	tab.{{$idx.Table.HeaderType}}By{{$idx.FieldInfo.FieldName}}[rec.{{$idx.FieldInfo.FieldName}}] = rec
end
{{end}}

return tab

`
